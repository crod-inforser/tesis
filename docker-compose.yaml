version: '3.7'

services:
  converter:
    build: converter
    image: rcg_converter:latest
  api:
    build: api
    ports:
      - "3000:3000"
    depends_on:
      - converter
    volumes:
      - "./api:/app"
    command: sh -c "yarn && yarn dev"
  simulator:
    build: simulator
    ports:
      - "5500:5500"
    depends_on:
      - api
    environment:
      REACT_APP_SOCKET: "http://localhost:3000"
      PORT: "5500"
      REACT_APP_PORT: "5500"